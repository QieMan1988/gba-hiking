# 游戏设计文档更新说明

**文档类型**：游戏设计文档更新说明
**版本号**：v1.0
**创建日期**：2026年1月29日
**维护团队**：游戏策划团队

---

## 文档说明

本文档说明了将《数值体系与关卡调整方案》和《关卡设计示例》的内容正式纳入《游戏设计文档》的所有更新。

---

## 一、更新概述

### 1.1 更新目标

将调整方案的核心内容正式纳入游戏设计文档，确保：
1. 所有数值调整都有明确的量化标准
2. 关卡设计基于真实徒步路线
3. 新增机制（累积爬升、上坡下坡、补给系统、疲劳系统）得到完整描述
4. 保持文档风格和结构的一致性

### 1.2 更新范围

- **第3章：数值与平衡**：全面更新
- **第4章：关卡与流程**：全面更新
- **1.8.4节：关卡设计中的文化元素**：补充澳门关卡
- **附录：真实路线资料**：新增

---

## 二、第3章：数值与平衡更新

### 2.1 新增3.1节：基准标准

**内容**：
- 初始体能 100 = 20 公里徒步 或 2000 米累积爬升
- 每 10 公里徒步 = 产生 20,000 徒步数
- 每 5 公里徒步需要 1 次休息缓解疲劳才能继续（游戏中后期可突破）
- 每 10 公里徒步需要 2 瓶水 + 1 瓶运动饮料 + 1 次巧克力补给

### 2.2 更新3.1节：五维属性系统

**主要变更**：
- 体能定义：1点体能 = 0.2公里徒步 或 20米累积爬升
- 疲劳计算公式：`(徒步距离 / 5) + (累积爬升 / 250)`
- 体能消耗公式：`(徒步距离 / 20) + (累积爬升 / 20)`

**地形障碍体能消耗调整表**：

| 地形类型 | 每公里体能消耗 | 累积爬升（每公里） | 总体能消耗 | 徒步数奖励 |
|---------|---------------|------------------|-----------|-----------|
| 平坦道路 | 5点 | 0m | 5点 | 100 |
| 缓坡（上坡） | 8点 | 50m | 10.5点 | 200 |
| 陡坡 | 15点 | 150m | 22.5点 | 450 |
| 乱石路 | 12点 | 80m | 16点 | 320 |
| 溪流 | 8点 | 20m | 9点 | 180 |
| 悬崖栈道 | 20点 | 300m | 35点 | 700 |

### 2.3 更新3.2节：经济系统

**主要变更**：
- "海拔数" → "累积爬升"
- 徒步数获得方式：从"消除卡牌"改为"徒步距离累积"
- 累积爬升计算：根据关卡中所有上坡路段的实际爬升计算

**徒步数计算公式**：
```
徒步数 = 徒步距离（公里）× 2,000
```

**资源卡调整表**：

| 资源卡名称 | 恢复效果 | 环保值消耗 | 补给单位 |
|-----------|---------|-----------|---------|
| 矿泉水 | 口渴+20 | 25环保值 | 1瓶 |
| 运动饮料 | 口渴+15，疲劳-5 | 50环保值 | 1瓶 |
| 巧克力 | 体能+15，饥饿+20 | 75环保值 | 1次 |
| 能量棒 | 体能+20，饥饿+15 | 100环保值 | 1次 |
| 香蕉 | 体能+10，钾元素+20 | 60环保值 | 1次 |
| 电解质水 | 口渴+30，心率-10 | 80环保值 | 1瓶 |
| 运动补给包 | 口渴+25，体能+20，疲劳-10 | 150环保值 | 1次 |

**补给需求计算公式**：
```
需水量 = 徒步距离 / 5
需运动饮料量 = 徒步距离 / 10
需巧克力补给次数 = 徒步距离 / 10
```

### 2.4 新增3.4节：累积爬升概念

**内容**：
- 累积爬升定义
- 地形坡度分级
- 累积爬升与海拔的区别

**地形坡度分级表**：

| 地形类型 | 坡度范围 | 垂直上升系数（每公里） | 累积爬升计算 |
|---------|---------|---------------------|------------|
| 平坦道路 | 0-5% | 0m/km | 不计入累积爬升 |
| 缓坡（上坡） | 5-15% | 30-80m/km | 计入累积爬升 |
| 陡坡 | 15-30% | 80-280m/km | 计入累积爬升 |
| 悬崖栈道 | >30% | >280m/km | 计入累积爬升 |

### 2.5 更新3.3节：难度曲线

**主要变更**：
- 新的层级设定：每层代表约2公里的徒步距离
- 新的关卡难度分级：新手/标准/挑战/精英/BOSS
- 参考真实路线：麦理浩径

**层级结构调整表**：

| 关卡类型 | 总层数 | 总徒步距离 | 每层卡牌数（从下到上） | 每层徒步距离（公里） |
|---------|-------|-----------|---------------------|---------------------|
| 前段关 (1-3) | 5层 | 10公里 | 4-3-3-2-1 | 每层2公里 |
| 中段关 (4-6) | 7层 | 14公里 | 4-4-4-4-3-2-1 | 每层2公里 |
| 后段关 (7-9) | 9层 | 18公里 | 5-5-5-5-4-3-2-2-1 | 每层2公里 |
| 精英关 (10) | 11层 | 22公里 | 6-6-6-5-4-3-3-2-2-1-1 | 每层2公里 |
| BOSS关 (11) | 13层 | 26公里 | 特殊设计 | 每层2公里 |

**关卡难度分级表**：

| 关卡类型 | 关卡编号 | 适合玩家 | 总层数 | 总距离 | 累积爬升 | 难度 | 补给点 |
|---------|---------|---------|-------|--------|---------|------|-------|
| 新手关 | 1-3 | 初学者 | 5层 | 10公里 | 200-400m | ⭐⭐ | 每2层 |
| 标准关 | 4-6 | 轻度玩家 | 7层 | 14公里 | 400-600m | ⭐⭐⭐ | 每2-3层 |
| 挑战关 | 7-9 | 重度玩家 | 9层 | 18公里 | 600-800m | ⭐⭐⭐⭐ | 每3层 |
| 精英关 | 10 | 专家玩家 | 11层 | 22公里 | 800-1000m | ⭐⭐⭐⭐⭐ | 每3层 |
| BOSS关 | 11+ | 大师玩家 | 13层 | 26公里 | 1000-1200m | ⭐⭐⭐⭐⭐⭐ | 每3层 |

**麦理浩径参考表**：

| 段号 | 距离（公里） | 累积爬升（米） | 难度 | 关卡对应 |
|------|------------|--------------|------|---------|
| 第1段 | 10.6 | 450 | ⭐⭐ | 关卡1-2 |
| 第2段 | 13.5 | 550 | ⭐⭐⭐ | 关卡3-4 |
| 第3段 | 9.8 | 400 | ⭐⭐ | 关卡5 |
| 第4段 | 12.8 | 580 | ⭐⭐⭐⭐ | 关卡6-7 |
| 第5段 | 10.6 | 450 | ⭐⭐⭐ | 关卡8 |
| 第6段 | 5.2 | 320 | ⭐⭐ | 关卡9 |
| 第7段 | 10.5 | 650 | ⭐⭐⭐⭐ | 关卡10（精英） |
| 第8段 | 9.2 | 420 | ⭐⭐⭐ | 关卡11 |
| 第9段 | 9.6 | 500 | ⭐⭐⭐⭐ | 关卡12 |
| 第10段 | 15.6 | 620 | ⭐⭐⭐⭐⭐ | 关卡13（BOSS） |

---

## 三、第4章：关卡与流程更新

### 3.1 新增4.1节：上坡下坡机制

**内容**：
- 地形坡度识别系统
- 上坡机制（视觉、效果）
- 下坡机制（视觉、效果）
- 累积爬升显示

**地形坡度识别表**：

| 地形类型 | 坡度 | 累积爬升（每层） | 下坡概率 | 特殊机制 |
|---------|------|----------------|---------|---------|
| 平坦道路 | 0-5% | 0m | 0% | 无特殊机制 |
| 缓坡上坡 | 5-15% | 100m | 10% | 体能消耗增加 |
| 陡坡上坡 | 15-30% | 300m | 15% | 疲劳增加，可能触发"呼吸急促" |
| 悬崖栈道 | >30% | 600m | 20% | 恐惧状态，需要确认翻越 |
| 缓坡下坡 | -15%到-5% | 0m（不计入） | 100% | 体能消耗减少，但可能触发"膝盖疼痛" |
| 陡坡下坡 | -30%到-15% | 0m（不计入） | 100% | 体能消耗大幅减少，但可能触发"膝盖磨损" |

### 3.2 更新4.1节：动态关卡系统

**主要变更**：
- 关卡生成流程更新
- 地形生成规则
- 上坡下坡交替机制

**地形生成算法**：
```
1. 计算目标累积爬升
2. 生成地形序列（每层2公里）
3. 确保上坡和下坡的合理交替
4. 避免连续3层都是陡坡
```

### 3.3 新增4.3节：休息机制

**内容**：
- 休息次数限制
- 休息效果

**休息次数限制表**：

| 游戏阶段 | 初始休息次数 | 每次休息消耗 | 最大休息次数 |
|---------|-----------|------------|------------|
| 新手期（1-3关） | 3次 | 1次 | 3次 |
| 标准期（4-6关） | 2次 | 1次 | 2次 |
| 挑战期（7-11关） | 1次 | 1次 | 1次 |
| 突破限制 | 0次 | - | 通过装备/照片卡实现 |

**休息效果表**：

| 休息类型 | 恢复效果 | 消耗 | 备注 |
|---------|---------|------|------|
| 快速休息 | 疲劳-5 | 30秒 | 最小恢复 |
| 标准休息 | 疲劳-10，体能+20 | 60秒 | 标准恢复 |
| 深度休息 | 疲劳-15，体能+30，饥饿+20，口渴+20 | 90秒 | 最大恢复 |

### 3.4 新增4.4节：补给点设计

**内容**：
- 补给点生成规则
- 补给点内容

**补给点生成规则表**：

| 关卡类型 | 补给点间隔 | 补给点数量 | 补给点位置 |
|---------|-----------|-----------|-----------|
| 新手关 | 每2层 | 2个 | 第2层、第4层 |
| 标准关 | 每2-3层 | 2-3个 | 第2层、第4层、第6层 |
| 挑战关 | 每3层 | 3个 | 第3层、第6层、第8层 |
| 精英关 | 每3层 | 3个 | 第3层、第6层、第9层 |
| BOSS关 | 每3层 | 4个 | 第3层、第6层、第9层、第11层 |

**补给点内容表**：

| 补给点类型 | 包含内容 | 价格（环保值） |
|-----------|---------|--------------|
| 小型补给点 | 1瓶矿泉水 + 1根能量棒 | 125环保值 |
| 中型补给点 | 1瓶运动饮料 + 1次巧克力补给 | 125环保值 |
| 大型补给点 | 1次运动补给包 + 1瓶矿泉水 | 175环保值 |
| 超级补给点 | 2次运动补给包 + 照片卡包（基础） | 300环保值 |

### 3.5 新增4.6节：疲劳突破机制

**内容**：
- 装备突破
- 照片卡突破
- 游戏后期突破

**装备突破表**：

| 装备 | 突破效果 | 说明 |
|------|---------|------|
| 登山靴 | 疲劳积累速度-20% | 减慢疲劳积累 |
| 专业背包 | 疲劳积累速度-30% | 大幅减慢疲劳积累 |
| 登山杖 | 每次休息恢复+20% | 提高休息效率 |

**照片卡突破表**：

| 照片卡 | 突破效果 | 说明 |
|--------|---------|------|
| 登山达人 | 疲劳积累速度-25% | 累计使用50次后解锁 |
| 徒步专家 | 疲劳积累速度-50% | 累计使用100次后解锁 |
| 铁人三项 | 疲劳不积累，体能消耗+10% | 终极照片卡 |

---

## 四、1.8.4节：关卡设计中的文化元素更新

### 4.1 新增澳门关卡

**补充内容**：

| 章节 | 关卡名称 | 文化主题 | 文化元素体现 |
|------|---------|---------|------------|
| **第一章** | 香港郊野公园 | 登山文化 | 大屿山、太平山顶、郊野公园 |
| **第一章补充** | 澳门路环步行径 | 澳门自然风光与乡村文化 | 路环市区、九澳山、黑沙海滩 |
| **第一章补充** | 路环东北步行径 | 澳门生态保护与海岸风光 | 路环电厂、妈祖文化村、黑沙海滩 |
| **第二章** | 维港两岸 | 海港文化 | 维多利亚港、天星小轮、中环码头 |

### 4.2 澳门文化元素

**新增地理文化元素**：

| 城市 | 地标名称 | 文化含义 | 游戏表现形式 |
|------|---------|---------|------------|
| **澳门** | 路环市区 | 澳门乡村文化 | 关卡设计、风景卡 |
| **澳门** | 九澳山 | 澳门自然风光 | 关卡设计、地形障碍 |
| **澳门** | 黑沙海滩 | 澳门海岛文化 | 风景卡、特殊关卡 |
| **澳门** | 妈祖文化村 | 澳门宗教文化 | 照片卡、文化故事 |

**新增风景卡**：

| 风景卡名称 | 文化元素 | 文化含义 | 卡牌效果 |
|-----------|---------|---------|---------|
| **路环市区** | 澳门乡村文化 | 传统岭南建筑 | 连击奖励+20% |
| **九澳水库** | 澳门生态保护 | 水源地保护 | 连击奖励+15% |
| **九澳山** | 澳门自然风光 | 海岛山景 | 连击奖励+15% |
| **黑沙海滩** | 澳门海岛文化 | 黑色沙粒海滩 | 策略爆发+30% |
| **妈祖文化村** | 澳门宗教文化 | 海神妈祖信仰 | 连击奖励+25% |

---

## 五、技术架构文档更新

### 5.1 需要更新的技术模块

**技术架构文档**（architecture_doc.md）需要更新的模块：

1. **数据层设计**：
   - 累积爬升数据结构
   - 地形坡度数据结构
   - 补给需求数据结构
   - 休息数据结构

2. **逻辑层设计**：
   - 累积爬升计算模块
   - 上坡下坡判定模块
   - 补给需求计算模块
   - 疲劳休息模块
   - 体能消耗计算模块

3. **表现层设计**：
   - 累积爬升显示UI
   - 上坡下坡视觉效果
   - 补给不足警告UI
   - 休息UI

### 5.2 数据结构更新

**累积爬升数据结构**：
```gdscript
class_name ElevationData
extends Resource

@export var total_elevation_gain: float = 0.0  # 总累积爬升（米）
@export var current_elevation: float = 0.0     # 当前海拔（米）
@export var uphill_sections: Array[float] = []  # 上坡路段列表
@export var downhill_sections: Array[float] = [] # 下坡路段列表
```

**地形坡度数据结构**：
```gdscript
class_name TerrainSlopeData
extends Resource

@export var slope_type: SlopeType = SlopeType.FLAT
@export var slope_percentage: float = 0.0
@export var elevation_gain: float = 0.0
@export var elevation_loss: float = 0.0

enum SlopeType {
    FLAT,           # 平坦道路 (0-5%)
    GENTLE_UPHILL,  # 缓坡上坡 (5-15%)
    STEEP_UPHILL,   # 陡坡 (15-30%)
    CLIFF,          # 悬崖栈道 (>30%)
    GENTLE_DOWNHILL,# 缓坡下坡 (-15%到-5%)
    STEEP_DOWNHILL  # 陡坡下坡 (-30%到-15%)
}
```

**补给需求数据结构**：
```gdscript
class_name SupplyRequirement
extends Resource

@export var water_needed: float = 0.0
@export var sports_drink_needed: float = 0.0
@export var chocolate_needed: float = 0.0
@export var total_eco_value_needed: float = 0.0
@export var current_distance: float = 0.0
```

**休息数据结构**：
```gdscript
class_name RestData
extends Resource

@export var rest_count: int = 3
@export var max_rest_count: int = 3
@export var fatigue_accumulated: float = 0.0
@export var rest_cooldown: float = 0.0
```

### 5.3 模块更新

**新增计算模块**：

1. **累积爬升计算器**（ElevationCalculator）：
   - 计算累积爬升
   - 判定地形坡度
   - 计算垂直上升/下降高度

2. **补给需求计算器**（SupplyRequirementCalculator）：
   - 计算补给需求
   - 检查补给不足
   - 生成补给警告

3. **疲劳计算器**（FatigueCalculator）：
   - 计算疲劳积累
   - 判定休息需求
   - 应用休息效果

4. **体能消耗计算器**（StaminaCostCalculator）：
   - 计算体能消耗
   - 应用地形影响
   - 应用装备影响

**更新现有模块**：

1. **关卡生成器**（LevelGenerator）：
   - 支持上坡下坡地形生成
   - 确保地形交替合理性
   - 生成补给点位置

2. **属性管理器**（AttributeManager）：
   - 支持疲劳系统
   - 支持补给影响
   - 支持休息恢复

3. **UI管理器**（UIManager）：
   - 显示累积爬升
   - 显示补给需求
   - 显示休息UI
   - 显示上坡下坡视觉效果

### 5.4 配置文件更新

**新增配置文件**：

1. `config/elevation_config.json`：
   - 地形坡度定义
   - 累积爬升计算参数
   - 麦理浩径段数据

2. `config/supply_config.json`：
   - 补给需求参数
   - 资源卡数据
   - 补给点配置

3. `config/rest_config.json`：
   - 休息次数配置
   - 休息效果配置
   - 突破机制配置

**更新配置文件**：

1. `config/balance_config.json`：
   - 更新体能消耗参数
   - 更新疲劳计算参数
   - 更新徒步数计算参数

---

## 六、实施建议

### 6.1 实施优先级

**第一阶段（必须实施）**：
1. 更新游戏设计文档第3、4章
2. 更新技术架构文档数据层
3. 更新配置文件

**第二阶段（重要）**：
4. 实现累积爬升计算模块
5. 实现上坡下坡判定模块
6. 更新关卡生成器

**第三阶段（优化）**：
7. 实现补给需求检查系统
8. 实现疲劳休息系统
9. 更新UI显示
10. 平衡性调整和测试

### 6.2 验证标准

**文档完整性**：
- ✅ 所有数值都有明确的量化标准
- ✅ 所有机制都有详细的描述
- ✅ 所有关卡都有真实路线参考
- ✅ 所有文化元素都有教育意义

**技术可行性**：
- ✅ 数据结构设计合理
- ✅ 模块划分清晰
- ✅ 接口定义明确
- ✅ 性能可预期

**游戏平衡性**：
- ✅ 难度曲线合理
- ✅ 补给系统平衡
- ✅ 疲劳系统平衡
- ✅ 经济系统平衡

---

## 七、总结

本次更新将《数值体系与关卡调整方案》和《关卡设计示例》的内容正式纳入游戏设计文档，主要完成了以下工作：

1. **数值体系全面调整**：
   - 引入累积爬升概念
   - 更新体能消耗计算
   - 更新徒步数计算
   - 新增补给需求系统
   - 新增疲劳休息系统

2. **关卡设计优化**：
   - 新增上坡下坡机制
   - 参考麦理浩径等真实路线
   - 新增澳门路环步行径关卡
   - 优化难度曲线

3. **文化元素补充**：
   - 新增澳门文化元素
   - 新增妈祖文化等内容
   - 强化文化教育功能

4. **技术架构调整**：
   - 更新数据结构设计
   - 新增计算模块
   - 更新现有模块
   - 新增配置文件

所有更新都遵循了游戏设计文档的规范和风格，确保了文档的一致性和完整性。

---

**文档结束**

游戏设计文档更新说明 v1.0  
**维护团队**：游戏策划团队  
**最后更新**：2026年1月29日
