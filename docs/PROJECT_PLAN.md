# 《大湾区徒步》项目开发计划

## 计划变更摘要 (2026-02-01)
> **本次更新基于《游戏设计文档 v7.0》与《技术架构文档 v2.0》进行同步**
>
> **关键调整点**：
> 1.  **核心系统扩展**：新增补给系统、疲劳系统、地形系统（上坡/下坡/膝盖损伤）。
> 2.  **概念迭代**：将“海拔数”更新为“累积爬升”，确立其为核心稀有货币。
> 3.  **关卡重构**：引入真实路线（麦理浩径、澳门路环）作为关卡生成基础。
> 4.  **架构对齐**：任务分解增加 TerrainSystem, SupplySystem, FatigueSystem 等模块。
>
> **影响范围**：
> - 开发阶段：P2（核心系统）和 P3（功能系统）的任务密度增加。
> - 资源分配：需重点关注数值策划与真实路线数据的配置工作。

---

**项目版本**：v1.0.0
**计划版本**：v1.1
**创建日期**：2026年1月29日
**计划周期**：8周
**最后更新**：2026年2月1日

---

## 目录

1. [项目概述](#项目概述)
2. [项目目标](#项目目标)
3. [项目范围](#项目范围)
4. [开发阶段](#开发阶段)
5. [任务分解](#任务分解)
6. [资源分配](#资源分配)
7. [风险管理](#风险管理)
8. [质量保证](#质量保证)
9. [里程碑](#里程碑)
10. [验收标准](#验收标准)

---

## 项目概述

### 项目背景

《大湾区徒步》是一款以大湾区地理文化为背景的2D卡牌Roguelike策略休闲游戏，融合登山式消除、轻Roguelike卡牌构筑与环保教育元素。

### 项目愿景

创建一个既有娱乐性又有教育意义的卡牌游戏，让玩家在爽快的卡牌穿越体验中，深度体验大湾区自然人文之美，同时传播环保理念。

### 项目使命

通过优秀的游戏设计和严格的开发规范，打造高质量、高可维护性的游戏产品，为团队积累技术经验，为玩家提供优质游戏体验。

---

## 项目目标

### 主要目标

1. **功能目标**
   - 实现完整的登山式卡牌玩法 [UPD: 包含上坡下坡与分级翻越]
   - 实现13个基于真实路线的关卡（含教学关、精英关、BOSS关） [UPD: 10 -> 13]
   - 实现15种不同类型的卡牌
   - 实现完善的存档系统
   - 实现Steam平台集成

2. **质量目标**
   - 代码覆盖率 ≥ 70%
   - 核心系统覆盖率 ≥ 80%
   - 无严重bug
   - 性能稳定（60 FPS以上）
   - 内存占用合理（< 500MB）

3. **时间目标**
   - 8周内完成开发
   - 2周内完成测试
   - 1周内完成优化
   - 按时交付

4. **团队目标**
   - 提升团队技术水平
   - 建立完善的开发流程
   - 积累可复用的技术资产

### 次要目标

- 创建完善的文档体系
- 建立自动化测试流程
- 实现持续集成/持续部署
- 培养团队成员的项目管理能力

---

## 项目范围

### 包含内容

#### 核心功能

1. **卡牌系统**
   - 15种不同类型的卡牌（风景、地形、资源、环境、照片） [UPD]
   - 基于真实路线的卡牌生成算法 [UPD]
   - 分级翻越机制（点击、长按、确认） [ADD]
   - 登山式布局与穿越机制

2. **地形与环境系统 [ADD]**
   - 8种地形类型（含上坡、下坡、悬崖等）
   - 上坡（累积爬升）与下坡（膝盖损伤）机制
   - 6种天气系统（晴天、高温、台风等）及其对玩法的动态影响

3. **属性与状态系统 [UPD]**
   - 五维属性（体能、背包、饥饿、口渴、心率） [UPD]
   - [ADD] 补给系统（水、运动饮料、巧克力等）
   - [ADD] 疲劳系统（休息机制、疲劳积累与突破）

4. **连击系统**
   - 同类型连击
   - [ADD] 连续攀登连击 & 跨层连击
   - 连击奖励与流派强化

5. **经济系统**
   - 三种货币：徒步数、累积爬升、环保值 [UPD: 海拔数 -> 累积爬升]
   - 商店系统（游动商贩、景区商店）

6. **关卡系统**
   - 基于真实路线（麦理浩径、澳门路环）的关卡生成 [UPD]
   - 13个关卡（教学、新手、标准、挑战、精英、BOSS） [UPD]
   - 动态难度调整

7. **UI系统**
   - 主菜单、战斗界面（含累积爬升显示）、设置界面、结算界面、商店界面

8. **存档与Steam集成**
   - 多存档、云存档
   - 成就系统、排行榜、统计数据

#### 技术架构

1. **分层架构**
   - 表现层、逻辑层、数据层

2. **模块化设计**
   - 核心管理器（GameManager, CardSystem, TerrainSystem, SupplySystem, FatigueSystem 等） [UPD]

3. **开发工具**
   - 构建脚本、测试脚本
   - 真实路线数据导入工具 [ADD]

#### 文档体系

1. **设计文档**
   - 游戏设计文档、技术架构文档、API文档

2. **开发文档**
   - 开发规范、工作流程、贡献指南

3. **用户文档**
   - 游戏手册、操作指南

### 不包含内容

1. 多人游戏功能
2. 移动端版本
3. 网络对战
4. DLC内容
5. 社交功能（聊天、好友等）

---

## 开发阶段

### 第一阶段：基础架构（第1周）

**目标**：完成项目基础架构搭建

**任务**：
- [x] 创建项目目录结构
- [x] 配置开发环境
- [x] 创建核心管理器框架
- [x] 创建配置文件框架
- [x] 创建开发工具脚本
- [x] 建立文档体系
- [x] 配置版本控制

**交付物**：
- 完整的项目结构
- 核心管理器占位符
- 开发工具脚本
- 项目文档

### 第二阶段：核心系统开发（第2-3周）

**目标**：实现核心游戏系统（卡牌、地形、数据）

**任务**：

**第2周：数据与基础地形**
- [ ] [UPD] 完善卡牌数据库与真实路线配置（ConfigManager）
- [ ] [UPD] 实现地形系统基础（TerrainSystem，含8种地形定义）
- [ ] [UPD] 实现数值平衡配置（含累积爬升计算）
- [ ] 实现数据加载系统
- [ ] 实现配置热更新

**第3周：卡牌与进阶机制**
- [ ] [UPD] 实现基于路线的卡牌生成逻辑（CardSystem）
- [ ] [ADD] 实现分级翻越机制（长按、确认框）
- [ ] [ADD] 实现上坡下坡机制与膝盖损伤检测
- [ ] 实现卡牌效果系统与动画
- [ ] 编写卡牌与地形系统测试

**交付物**：
- 完整的卡牌与地形系统
- 真实路线配置数据
- 核心机制测试报告

### 第三阶段：功能系统开发（第4-5周）

**目标**：实现游戏核心功能（属性、补给、疲劳、连击）

**任务**：

**第4周：属性、补给与疲劳**
- [ ] [UPD] 实现属性系统（AttributeSystem，含饥饿/口渴/心率）
- [ ] [ADD] 实现补给系统（SupplySystem，含补给点逻辑）
- [ ] [ADD] 实现疲劳系统（FatigueSystem，含休息机制）
- [ ] [UPD] 实现经济系统（含累积爬升货币逻辑）
- [ ] 实现存档系统

**第5周：连击与关卡流程**
- [ ] [UPD] 实现连击系统（含跨层连击、流派加成）
- [ ] [UPD] 实现完整关卡流程（基于真实路线数据的加载）
- [ ] [UPD] 实现天气系统（6种天气效果及动态变化）
- [ ] 实现难度递增与动态调整
- [ ] 编写各系统单元测试

**交付物**：
- 完整的属性、补给、疲劳系统
- 完整的连击与经济系统
- 包含天气变化的关卡流程
- 系统测试报告

### 第四阶段：UI开发（第6周）

**目标**：实现完整的用户界面

**任务**：
- [ ] 实现主菜单UI
- [ ] [UPD] 实现战斗UI（增加累积爬升、补给警告、地形提示）
- [ ] 实现设置UI
- [ ] 实现结算UI
- [ ] 实现商店UI（含补给购买）
- [ ] 实现UI动画和特效
- [ ] 编写UI测试

**交付物**：
- 完整的UI系统
- UI动画和特效
- UI测试

### 第五阶段：Steam集成（第7周）

**目标**：实现Steam平台功能

**任务**：
- [ ] 集成Steamworks SDK
- [ ] 实现成就系统
- [ ] 实现排行榜系统
- [ ] 实现云存档
- [ ] 实现统计数据
- [ ] 编写Steam功能测试

**交付物**：
- Steam集成
- 成就系统
- 排行榜系统
- 云存档

### 第六阶段：优化和完善（第8周）

**目标**：优化性能，修复bug，完善功能

**任务**：
- [ ] 性能优化
- [ ] 内存优化
- [ ] Bug修复
- [ ] 数值平衡调整
- [ ] 完善文档
- [ ] 用户体验优化

**交付物**：
- 优化后的游戏
- 完整的文档
- 测试报告

---

## 任务分解

### 按优先级分类

#### P0 - 必须完成（第1-8周）

1. **核心玩法**
   - 卡牌系统（含分级翻越）
   - 地形系统（含上坡下坡） [ADD]
   - 属性系统（含补给、疲劳） [UPD]
   - 关卡系统（基于真实路线）

2. **基础功能**
   - 存档系统
   - 经济系统（含累积爬升）
   - UI系统

3. **平台集成**
   - Steam集成

#### P1 - 应该完成（第5-8周）

1. **高级功能**
   - 天气系统（动态变化）
   - 膝盖损伤机制 [ADD]
   - 特效系统

2. **优化**
   - 性能优化
   - 内存优化

#### P2 - 可以完成（第8周后）

1. **扩展功能**
   - 更多真实路线
   - 更多照片卡流派
   - 挑战模式

### 按模块分类

#### 卡牌与地形模块（负责人：卡牌组） [UPD]

**任务列表**：
1. 卡牌数据结构设计（已完成）
2. 基于路线的卡牌生成算法 [UPD]
3. 分级翻越机制（点击/长按/确认） [ADD]
4. 上坡下坡与膝盖损伤逻辑 [ADD]
5. 卡牌动画实现
6. 模块测试

**工作量估计**：45人天 [UPD]

#### 属性与状态模块（负责人：属性组） [UPD]

**任务列表**：
1. 属性数据结构设计（五维属性）
2. 补给系统实现（需求计算、补给点） [ADD]
3. 疲劳系统实现（积累、休息、突破） [ADD]
4. 属性恢复与消耗机制
5. 模块测试

**工作量估计**：30人天 [UPD]

#### 连击模块（负责人：连击组）

**任务列表**：
1. 连击检测算法（含跨层、连续攀登） [UPD]
2. 连击奖励与流派加成
3. 连击超时机制
4. 连击UI实现
5. 模块测试

**工作量估计**：15人天

#### 关卡与环境模块（负责人：关卡组） [UPD]

**任务列表**：
1. 真实路线数据配置（麦理浩径等） [ADD]
2. 关卡加载与动态生成
3. 天气系统实现（6种天气）
4. 动态难度调整
5. 模块测试

**工作量估计**：35人天

#### UI模块（负责人：UI组）

**任务列表**：
1. UI框架搭建
2. 战斗UI（含新属性、累积爬升显示） [UPD]
3. 商店UI（含补给购买） [UPD]
4. 其他界面实现
5. 模块测试

**工作量估计**：30人天

#### Steam模块（负责人：Steam组）

**任务列表**：
1. Steamworks SDK集成
2. 成就系统实现
3. 排行榜系统实现
4. 云存档实现
5. 统计数据实现
6. 模块测试

**工作量估计**：25人天

---

## 资源分配

### 人力资源

| 角色 | 人数 | 职责 |
|------|------|------|
| 项目经理 | 1 | 项目管理、进度控制、资源协调 |
| 系统架构师 | 1 | 架构设计、技术指导、代码审查 |
| 游戏策划 | 2 | 游戏设计、数值平衡、关卡设计 |
| 前端开发 | 3 | UI开发、交互实现 |
| 后端开发 | 2 | 系统开发、数据管理 |
| 美术设计 | 2 | UI设计、美术资源制作 |
| 测试工程师 | 2 | 测试、质量保证 |
| 音效师 | 1 | 音效设计、音乐制作 |

### 时间资源

| 阶段 | 时间 | 主要任务 |
|------|------|----------|
| 第一阶段 | 第1周 | 基础架构搭建 |
| 第二阶段 | 第2-3周 | 核心系统开发 |
| 第三阶段 | 第4-5周 | 功能系统开发 |
| 第四阶段 | 第6周 | UI开发 |
| 第五阶段 | 第7周 | Steam集成 |
| 第六阶段 | 第8周 | 优化和完善 |

### 技术资源

- **开发环境**：Godot Engine 4.5.1+
- **版本控制**：Git + GitHub
- **持续集成**：GitHub Actions
- **项目管理**：GitHub Projects
- **文档工具**：Markdown
- **测试工具**：Godot Test Framework
- **数据资源**：麦理浩径/澳门路环官方路线数据 [ADD]

---

## 风险管理

### 风险识别

| 风险类别 | 风险描述 | 发生概率 | 影响程度 | 风险等级 |
|---------|---------|---------|---------|---------|
| 技术风险 | Godot版本兼容性问题 | 中 | 高 | 高 |
| 技术风险 | 性能不达标 | 中 | 高 | 高 |
| 数据风险 | 真实路线数据适配难度大 [ADD] | 中 | 中 | 中 |
| 进度风险 | 新增系统（补给/疲劳）导致工期紧张 [ADD] | 高 | 高 | 高 |
| 质量风险 | 严重bug遗漏 | 低 | 高 | 中 |
| 资源风险 | 人员流动 | 中 | 中 | 中 |
| 需求风险 | 需求变更 | 中 | 中 | 中 |
| 集成风险 | Steam集成失败 | 低 | 高 | 中 |

### 风险应对

#### 高风险应对

1. **Godot版本兼容性问题**
   - **预防措施**：使用稳定版本，定期测试
   - **应对措施**：保留回退方案，及时升级
   - **责任人**：系统架构师

2. **性能不达标**
   - **预防措施**：早期性能测试，优化设计
   - **应对措施**：性能分析工具，针对性优化
   - **责任人**：系统架构师

3. **新增系统导致工期紧张**
   - **预防措施**：严格控制功能边界，优先实现基础逻辑，特效后置
   - **应对措施**：必要时简化天气系统的视觉表现，确保核心玩法逻辑优先上线
   - **责任人**：项目经理

#### 中风险应对

4. **开发进度延迟**
   - **预防措施**：详细任务分解，定期评估
   - **应对措施**：加班、增加资源、调整范围
   - **责任人**：项目经理

5. **严重bug遗漏**
   - **预防措施**：完善测试用例，代码审查
   - **应对措施**：快速响应机制，修复流程
   - **责任人**：测试工程师

6. **人员流动**
   - **预防措施**：完善文档，知识共享
   - **应对措施**：备用人员，快速交接
   - **责任人**：项目经理

7. **需求变更**
   - **预防措施**：明确需求，冻结机制
   - **应对措施**：变更评估，调整计划
   - **责任人**：项目经理

8. **Steam集成失败**
   - **预防措施**：早期验证，充分测试
   - **应对措施**：替代方案，延迟发布
   - **责任人**：Steam组

---

## 质量保证

### 质量标准

#### 代码质量

- 代码覆盖率 ≥ 70%
- 核心系统覆盖率 ≥ 80%
- 代码审查通过率 100%
- 无严重代码规范违规

#### 性能质量

- 帧率 ≥ 60 FPS
- 内存占用 < 500MB
- 加载时间 < 3秒
- 响应时间 < 100ms

#### 功能质量

- 无严重bug
- 一般bug < 5个
- 功能完整性 100%
- 需求符合度 100%

#### 用户体验质量

- 用户满意度 ≥ 85%
- 用户反馈响应及时
- 操作流畅自然
- 界面友好美观

### 质量控制措施

#### 代码审查

- 所有代码必须经过审查
- 审查清单严格执行
- 审查意见必须处理
- 审查通过才能合并

#### 测试管理

- 单元测试覆盖率要求
- 集成测试自动化
- 回归测试定期执行
- 性能测试持续监控

#### 文档管理

- 文档必须完整准确
- 文档随代码同步更新
- 文档审查机制
- 文档版本管理

---

## 里程碑

### M1：基础架构完成（第1周结束）

**时间**：第1周五 18:00
**标准**：
- [x] 项目结构完成
- [x] 核心管理器框架完成
- [x] 配置文件框架完成
- [x] 开发工具完成
- [x] 文档体系建立

**交付物**：
- 项目结构
- 管理器框架
- 配置文件
- 开发工具
- 项目文档

### M2：核心系统完成（第3周结束）

**时间**：第3周五 18:00
**标准**：
- [ ] 卡牌生成与分级翻越完成 [UPD]
- [ ] 地形系统（上坡/下坡）完成 [ADD]
- [ ] 数据系统（含真实路线配置）完成 [UPD]
- [ ] 系统测试通过

**交付物**：
- 卡牌系统
- 数据系统
- 测试报告

### M3：功能系统完成（第5周结束）

**时间**：第5周五 18:00
**标准**：
- [ ] 属性、补给、疲劳系统完成 [UPD]
- [ ] 连击系统完成
- [ ] 经济系统（含累积爬升）完成 [UPD]
- [ ] 存档系统完成
- [ ] 关卡系统（含天气）完成
- [ ] 系统测试通过

**交付物**：
- 完整的功能系统
- 测试报告

### M4：UI系统完成（第6周结束）

**时间**：第6周五 18:00
**标准**：
- [ ] 所有UI完成
- [ ] UI测试通过
- [ ] 用户体验测试通过

**交付物**：
- 完整的UI系统
- 测试报告

### M5：Steam集成完成（第7周结束）

**时间**：第7周五 18:00
**标准**：
- [ ] Steam集成完成
- [ ] 成就系统完成
- [ ] 排行榜系统完成
- [ ] 云存档完成
- [ ] 功能测试通过

**交付物**：
- Steam集成
- 功能测试报告

### M6：项目交付（第8周结束）

**时间**：第8周五 18:00
**标准**：
- [ ] 所有功能完成
- [ ] 性能优化完成
- [ ] Bug修复完成
- [ ] 文档完善
- [ ] 全部测试通过
- [ ] 验收测试通过

**交付物**：
- 可交付的游戏
- 完整的文档
- 测试报告
- 验收报告

---

## 验收标准

### 功能验收

- 所有需求功能100%实现
- 真实路线还原度符合设计要求 [ADD]
- 补给与疲劳系统逻辑闭环 [ADD]
- 功能测试通过率100%
- 回归测试通过率100%
- 无严重bug
- 一般bug数量<5个

### 性能验收

- 帧率 ≥ 60 FPS
- 内存占用 < 500MB
- 加载时间 < 3秒
- 响应时间 < 100ms
- 无内存泄漏

### 质量验收

- 代码覆盖率 ≥ 70%
- 核心系统覆盖率 ≥ 80%
- 代码审查通过率100%
- 文档完整度100%

### 文档验收

- 设计文档完整准确
- 技术文档完整准确
- 用户文档完整准确
- 文档审查通过

### 验收流程

1. **自检**
   - 开发团队自检
   - 测试团队测试
   - 填写自检报告

2. **验收测试**
   - 独立测试团队验收
   - 性能测试
   - 用户体验测试
   - 填写验收报告

3. **评审**
   - 项目经理评审
   - 技术架构师评审
   - 产品经理评审
   - 评审通过

4. **交付**
   - 交付可执行文件
   - 交付完整文档
   - 交付源代码
   - 交付测试报告

---

## 附录

### A. 参考文档

- [游戏设计文档 v7.0](./docs/design/game_design_doc_final.md) [UPD]
- [技术架构文档 v2.0](./docs/architecture/architecture_doc_v2.0.md) [UPD]
- [项目开发指导规范](./docs/guides/PROJECT_DEVELOPMENT_GUIDE.md)
- [GitHub配置文档](./docs/github/GITHUB_CONFIG.md)

### B. 工具和资源

- Godot Engine：https://docs.godotengine.org/
- Godot Test Framework：https://github.com/bitwes/Gut
- Steamworks SDK：https://partner.steamgames.com/

### C. 联系方式

- **项目经理**：[待定]
- **技术架构师**：[待定]
- **项目邮箱**：gba-hiking@example.com

---

**文档结束**

《大湾区徒步》项目开发计划 v1.1
**最后更新**：2026年2月1日
